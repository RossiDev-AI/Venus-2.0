<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>V-NUS 2.0 | CORE BLINDADO</title>
    <style>
        body, html { margin: 0; padding: 0; width: 100vw; height: 100vh; overflow: hidden; background: #000; }
        iframe { border: none; width: 100vw; height: 100vh; }
        #status { 
            position: fixed; inset: 0; display: flex; align-items: center; 
            justify-content: center; color: #4f46e5; font-family: monospace; 
            background: #000; z-index: 10; pointer-events: none;
        }
    </style>
</head>
<body>
    <div id="status">INICIALIZANDO AMBIENTE ISOLADO...</div>
    
    <iframe id="venus-frame" srcdoc='
        <!DOCTYPE html>
        <html>
        <head>
            <link rel="stylesheet" href="https://unpkg.com/tldraw@2.4.4/dist/tldraw.css">
            <script src="https://unpkg.com/react@18.2.0/umd/react.production.min.js"></script>
            <script src="https://unpkg.com/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
            <script src="https://unpkg.com/tldraw@2.4.4/dist/tldraw.js"></script>
            <style>body, html, #root { margin: 0; height: 100vh; background: #000; overflow: hidden; }</style>
        </head>
        <body>
            <div id="root"></div>
            <script>
                const React = window.React;
                const Tldraw = window.tldraw.Tldraw;
                const root = window.ReactDOM.createRoot(document.getElementById("root"));
                
                root.render(React.createElement(Tldraw, { 
                    inferDarkMode: true,
                    persistenceKey: "v-nus-v2-isolated" 
                }));

                // Avisa o pai que carregou
                window.parent.postMessage("ready", "*");
            </script>
        </body>
        </html>
    '></iframe>

    <script>
        window.addEventListener("message", (event) => {
            if (event.data === "ready") {
                document.getElementById("status").style.display = "none";
                console.log("V-NUS KERNEL: AMBIENTE ISOLADO COM SUCESSO.");
            }
        });
    </script>
</body>
</html>